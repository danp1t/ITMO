<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Лабораторная работа №1</title>
	<link rel="stylesheet" href="styles.css">
	<style type="text/css">
		th {font-family: monospace; background-color: #acdef1; font-size:22px;}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
	<table width="100%">
		<tr>
			<th width="40%">Путинцев Данил Денисович</th>
			<th width="30%">P3207</th>
			<th width="30%">Вариант №409425</th>
		</tr>
		<tr>
      		<td style="background-color: #abcde0;" align="center" padding="10px">
      			
          		<img src="img.jpg" alt="Изображение" class="responsive-image">
          		<p id="north-top" class="overlay-label">R</p>
         	 	<p id="north-middle" class="overlay-label">R/2</p>
          		<p id="south-buttom" class="overlay-label">-R</p>
          		<p id="south-middle" class="overlay-label">-R/2</p>
          		<p id="west-left" class="overlay-label">-R</p>
          		<p id="west-middle" class="overlay-label">-R/2</p>
          		<p id="east-right" class="overlay-label">R</p>
          		<p id="east-middle" class="overlay-label">R/2</p>
      		</td>
      		<td style="background-color: #abcde0;" border="1">
      			<p><b>Ввод данных:</b></p>
      			<form>

	      			<label for="coor_x">Введите координату X (от -3 до 3):</label>
					<input type="text" id="coor_x" name="coor_x" required minlength="-3" maxlength="10" size="7">
					<div id="error_message" style="color: red;"></div>
					<label for="y">Выберите значение для координаты Y:</label>
					<button type="button" class="coor_y">-5</button> 
					<button type="button" class="coor_y">-4</button> 
					<button type="button" class="coor_y">-3</button> 
					<button type="button" class="coor_y">-2</button> 
					<button type="button" class="coor_y">-1</button> 
					<button type="button" class="coor_y">0</button> 
					<button type="button" class="coor_y">1</button> 
					<button type="button" class="coor_y">2</button> 
					<button type="button" class="coor_y">3</button> 
					<br>
					<label for="r">Выберите значение R:</label>
					<label for="r1">1</label>
					<input id="r1" type="radio" class="coor_r" name="question">
	    			
					<label for="r2">2</label>
	    			<input id="r2" type="radio" class="coor_r" name="question">
	    			
	    			<label for="r3">3</label>
	    			<input id="r3" type="radio" class="coor_r" name="question">
	    			
	    			<label for="r4">4</label>
	    			<input id="r4" type="radio" class="coor_r" name="question">
	    			
	    			<label for="r5">5</label>
	    			<input id="r5" type="radio" class="coor_r" name="question">
	    			
    			</form>
      		</td>
      		<td align="center" style="background-color: #abcde0;">
      			<table border="1" width="175px">
      				<p><b>Введенные данные:</b></p>

                	<tr>
                    	<td>X:</td>
                    	<td id="form_x">Значение X</td>
                	</tr>
                	<tr>
                    	<td>Y:</td>
                    	<td id="form_y">Значение Y</td>
                	</tr>
                	<tr>
                    	<td>R:</td>
                    	<td id="form_r">Значение R</td>
            	</table>
            	<button type="button" id="main_button">Отправить</button>
            	<div id="message" style="display:none; color: red;"></div>
            
            	
        	</td>
    	</tr>
    	<tr ><td id="resultTable"></td></tr>
	</table>
	 <script>
        document.getElementById('coor_x').addEventListener('input', function() {
    const input = this.value;
    const form_x = document.getElementById('form_x');
    const errorMessage = document.getElementById('error_message');

    // Проверяем, является ли введенное значение числом
    const isNumber = /^-?\d*\.?\d*$/.test(input); // Регулярное выражение для проверки числа

    if (!isNumber) {
        this.style.backgroundColor = 'lightcoral'; // Красим поле в светло-красный
        form_x.textContent = ''; // Не передаем данные в форму
        errorMessage.textContent = 'Ошибка: введите число.'; // Сообщение об ошибке
    } else if (input < -3 || input > 3) {
        this.value = null; // Очищаем поле
        this.style.backgroundColor = 'lightcoral'; // Красим поле в светло-красный
        form_x.textContent = ''; // Не передаем данные в форму
        errorMessage.textContent = 'Ошибка ввода координаты X. X должен быть от -3 до 3'; // Сообщение об ошибке
    } else {
        this.style.backgroundColor = ''; // Сбрасываем цвет поля
        form_x.textContent = input; // Передаем данные в форму
        errorMessage.textContent = ''; // Очищаем сообщение об ошибке
    }
});

        const buttons = document.querySelectorAll('.coor_y');

		buttons.forEach(button => {
    	button.addEventListener('click', function() {
        
        const value = this.textContent; 
        
        const form_y = document.getElementById('form_y');
        
        form_y.textContent = value;
    });
});
		const radioButtons = document.querySelectorAll('.coor_r');

		radioButtons.forEach(radio => {
    	radio.addEventListener('change', function() {
        if (this.checked) {
            const label = document.querySelector(`label[for="${this.id}"]`).textContent;
            const form_r = document.getElementById('form_r');
            const floatValue = parseFloat(label) / 2;

            form_r.textContent = label;

            //Изменение для надписей у рисунка
            const north_top = document.getElementById('north-top');
            north_top.textContent = label;
            const north_middle = document.getElementById('north-middle');
            north_middle.textContent = floatValue;
            const south_buttom = document.getElementById('south-buttom');
            south_buttom.textContent = "-" + label;
            const south_middle = document.getElementById('south-middle');
            south_middle.textContent = "-" + floatValue;
            const west_left = document.getElementById('west-left');
            west_left.textContent = "-" + label;
            const west_middle = document.getElementById('west-middle');
            west_middle.textContent = "-" + floatValue;
            const east_right = document.getElementById('east-right');
            east_right.textContent = label
            const east_middle = document.getElementById('east-middle');
            east_middle.textContent = floatValue;
        }
    });
});
	document.getElementById('main_button').addEventListener('click', function() {
    const x = document.getElementById('form_x').textContent;
    const y = document.getElementById('form_y').textContent;
    const r = document.getElementById('form_r').textContent;
    const messageDiv = document.getElementById('message');

    // Сбрасываем сообщение перед проверкой
    messageDiv.style.display = 'none';
    messageDiv.textContent = '';

    if (r == 'Значение R') {
        messageDiv.textContent = "Выберите значение для числа R";
        messageDiv.style.display = 'block';
        return; // Прерываем выполнение функции
    }

    if (y == 'Значение Y') {
        messageDiv.textContent = "Выберите значение для числа Y";
        messageDiv.style.display = 'block';
        return; // Прерываем выполнение функции
    }

    if (x == 'Значение X') {
        messageDiv.textContent = "Выберите значение для числа X";
        messageDiv.style.display = 'block';
        return; // Прерываем выполнение функции
    }

      
      	
      //Написать GET запрос, который передает данные на сервер
      $.ajax({
    url: '/fcgi-bin/lab1.jar',
    method: 'GET',
    dataType: 'html',
    data: {
        coor_x: document.getElementById('form_x').textContent,
        coor_y: document.getElementById('form_y').textContent,
        coor_r: document.getElementById('form_r').textContent
    },
    success: function(data, textStatus, jqXHR) {
        document.getElementById('resultTable').innerHTML = data;
    }
});
    });

    


    </script>
</body>
</html>